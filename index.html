<html xmlns="http://www.w3.org/1999/xhtml" class="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="shortcut icon" href="http://cdn-0.nflximg.com/en_US/icons/nficon.ico">
    <meta name="description" content="Netflix Open Source">
    <meta name="title" content="Netflix Open Source">
    <title>Netflix Open Source</title>
  
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.dateFormat-1.0.js"></script>
    <script type="text/javascript" src="http://d3js.org/d3.v2.min.js"></script>

    <link rel="stylesheet" type="text/css" href="css/style.css?v=201209070710">
    <link rel="stylesheet" type="text/css" href="css/commits.css?v=201209070710">
	<!--[if IE]>
	<style>
		.repo-item-cover, .repo-item-shadow, .repo-item-button
		{
		    width: 186px;
			height: 256px;
		}
	</style>
	<![endif]-->

    <script type="text/javascript">
        var reposTab = {};
        function repos(json)
        {
            reposTab = json.data;
        }
    </script>
    <script type="text/javascript" src="https://api.github.com/orgs/netflix/repos?callback=repos"></script>

    <script type="text/javascript">
		var ignoreRepos = {
			'netflix.github.com': true
		};
		var showingBalloonIndex = -1;
		var shouldBeShowingBalloonIndex = -1;
		
		function removeBalloon()
		{
			$('#balloon-container').hide();
			$('#balloon-arrow-left').hide();
			$('#balloon-arrow-right').hide();
			showingBalloonIndex = -1;
		}

		function displayBalloon(index)
		{
			if ( showingBalloonIndex === index )
			{
				return;
			}
			showingBalloonIndex = index;
			
            var thisRepo = reposTab[index];
            var updatedAt = parseISO8601(thisRepo.updated_at);
			var updatedStr = $.format.date(updatedAt, "MM/dd/yy") + ' ' + $.format.date(updatedAt, "@HH:mm:ss");

			$('#balloon-heading').text(thisRepo.name);
			$('#balloon-description').html(thisRepo.description + ' ' + '<span class="more-info"><a href="' + thisRepo.html_url + '">More&nbsp;Info</a></span>');
			$('#balloon-watchers').text(thisRepo.watchers);
			$('#balloon-forks').text(thisRepo.forks);
			$('#balloon-language').text(thisRepo.language);
			$('#balloon-issues').text(thisRepo.open_issues);
			$('#balloon-updated').text(updatedStr);
			
			var windowWidth = $(window).width();
			var offset = $('#repo-id-' + index).offset();
			var width = $('#repo-id-' + index).width();
			
			if ( offset.left < (windowWidth - 600) )
			{
				$('#balloon-container').css('left', offset.left + width + 52);
				$('#balloon-container').css('top', offset.top + 10);
				$('#balloon-arrow-left').css('left', offset.left + width + 5);
				$('#balloon-arrow-left').css('top', offset.top + 50);

				$('#balloon-container').show();
				$('#balloon-arrow-left').show();
				$('#balloon-arrow-right').hide();
			}
			else
			{
				$('#balloon-container').css('left', offset.left - 329);
				$('#balloon-container').css('top', offset.top + 10);
				$('#balloon-arrow-right').css('left', offset.left - 38);
				$('#balloon-arrow-right').css('top', offset.top + 50);

				$('#balloon-container').show();
				$('#balloon-arrow-left').hide();
				$('#balloon-arrow-right').show();
			}
		}	

		function showBalloon(index)
		{
			shouldBeShowingBalloonIndex = index;
		}
		
		function hideBalloon()
		{
			shouldBeShowingBalloonIndex = -1;
		}
		
		function adjustBalloon()
		{
			if ( shouldBeShowingBalloonIndex != showingBalloonIndex )
			{
				if ( shouldBeShowingBalloonIndex < 0 )
				{
					removeBalloon();
				}
				else
				{
					displayBalloon(shouldBeShowingBalloonIndex);
				}
			}
		}
		
		function showListContent()
		{
			$('#tab-content-repo').hide();
            $('#tab-content-timeline').hide();
			$('#tab-content-lists').show();
		}
		
		function showRepoContent()
		{
			$('#tab-content-lists').hide(); 
            $('#tab-content-timeline').hide();
			$('#tab-content-repo').show(); 
			resizeRepoContent();
		}

        function showTimelineContent() {
            $('#tab-content-repo').hide(); 
            $('#tab-content-lists').hide(); 
            $('#tab-content-timeline').show();
        }

        function parseISO8601(value) {
            a = /^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/.exec(value);
            if (a)
                 return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4], +a[5], +a[6]));

            if (value.slice(0, 5) === 'Date(' && value.slice(-1) === ')') {
               var d = new Date(value.slice(5, -1));

               if (d)
                  return d;
            }
            return new Date();
          }

		function resizeRepoContent()
		{
			$('#repo-content').css({'height':(($(window).height())-320)+'px'});
		}

        $(function(){
        	var imageUrl, imageFileName, boxArtOverride;
        	var projectsToBoxArtOverrides = {'asgard': 'Independent.jpg'};
            var repoContent = "";
			var boxArtIndex = 0;
            for ( var i = 0; i < reposTab.length; ++i )
            {
                var thisRepo = reposTab[i];
                if ( !thisRepo.private && !ignoreRepos[thisRepo.name] )
                {
                	boxArtOverride = projectsToBoxArtOverrides[thisRepo.name];
                	imageFileName = boxArtOverride ? boxArtOverride : 'box-art-' + boxArtIndex + '.jpg';
					imageUrl = 'assets/' + imageFileName;

                    repoContent += '<a class="repo-item-anchor" href="' + thisRepo.html_url + '">';
                    repoContent += '<div class="repo-item-container">';
                	repoContent += '<div id="repo-container-id-' + i + '" class="repo-item-name">' + thisRepo.name + '</div>';
                    repoContent += '<div id="repo-id-' + i + '" class="repo-item" style="background-image: url(' + imageUrl + ')">';
                        repoContent += '<div id="repo-cover-id-' + i + '" class="repo-item-cover"><div class="repo-item-shadow"></div></div>';
                        repoContent += '<div id="repo-button-id-' + i + '" class="repo-item-button"></div>';
                    repoContent += '</div></a>';
                    repoContent += '</div>';

					if ( ++boxArtIndex > 10 )
					{
						boxArtIndex = 0;
					}
                }
            }
            $('#repo-content').html(repoContent);

            for ( i = 0; i < reposTab.length; ++i )
            {
                var coverId = '#repo-cover-id-' + i;
                var buttonId = '#repo-button-id-' + i;
                $('#repo-id-' + i).data('cover-id', coverId);
                $('#repo-id-' + i).data('button-id', buttonId);
                $('#repo-id-' + i).data('index', i);
                $('#repo-id-' + i).hover(function(){
                    var coverId = $(this).data('cover-id');
                    var buttonId = $(this).data('button-id');
                    var index = $(this).data('index');
                    $(coverId).show();
                    $(buttonId).show();
					showBalloon(index);
                }, function(){
                    var coverId = $(this).data('cover-id');
                    var buttonId = $(this).data('button-id');
                    $(coverId).hide();
                    $(buttonId).hide();
					hideBalloon();
                });
            }

			$(window).resize(function(){
					      hideBalloon();
			              resizeRepoContent();
					});
			resizeRepoContent();
			
			window.setInterval("adjustBalloon()", 500);
			$('#balloon-container').hover(function(){
				shouldBeShowingBalloonIndex = showingBalloonIndex;
			},function(){
				shouldBeShowingBalloonIndex = -1;
			});
        });
    </script>
</head>

<body>

<div class="header">
    <div class="header-logo">
        <a href="http://www.netflix.com"><img src="assets/Netflix_Web_Logo.png" width="101" height="37" align="middle" alt="Netflix" border="0"></a>
        <div class="header-text">Netflix Open Source Center</div>
    </div>
</div>

<div id="sub-header">
	<a href="#" onClick="showRepoContent(); return false;">
	<div class="sub-header-item">
		Repositories
	</div>
	</a>

    <a href="#" onClick="showTimelineContent(); return false;">
    <div class="sub-header-item">
        Commit Timeline
    </div>
    </a>

	<a href="#" onClick="showListContent(); return false;">
	<div class="sub-header-item">
		Mailing Lists
	</div>
	</a>
</div>

<div id="tab-content-repo">
	<div id="repo-heading">
	    <a href="https://github.com/netflix">Our Repositories</a>
	</div>
	<div id="repo-content">

	</div>
</div>

<div id="tab-content-timeline">
    <div class="title">Netflix OSS GitHub Repositories</div>
    <div id="commits" orgName="Netflix" top-bottom-padding="380" left-right-padding="40" right-margin="50"></div>
    <div class="help">Scroll to expand or compress the timelines, drag to shift the timelines earlier or later, and mouse over a timeline to see the committers's names and commit messages.</div>
    <script type="text/javascript" src="http://javaposseroundup.github.com/d3github/commits.js"></script>
</div>

<div id="tab-content-lists">
	<div id="lists-content">
		<div id="lists-content-heading">
			Mailing Lists
		</div>
		
		<div class="lists-content-item">
			<p>
			We maintain mailing lists for some of our open source projects. Click on the following
			links to subscribe and/or maintain your subscriptions.
			</p>
			
			<p>
				<li><a href="http://groups.google.com/group/AsgardUsers"><strong><i>Asgard</i></strong> Mailing List</a></li>								
				<li><a href="https://listserv.netflix.com/mailman/listinfo/curator-users"><strong><i>Curator</i></strong> Mailing List</a></li>
				<li><a href="https://listserv.netflix.com/mailman/listinfo/exhibitor-users"><strong><i>Exhibitor</i></strong> Mailing List</a></li>		
				<li><a href="http://groups.google.com/group/simianarmy-users"><strong><i>Simian Army</i></strong> Mailing List</a></li>		
			</p>
		</div>
	</div>
</div>
<div id="info-box">
    <div id="info-box-content">
        <div class="info-box-content-item-header">
            A Netflix Original Production
        </div>

        <div class="info-box-content-item-header">
            Open Source
        </div>

        <div class="info-box-content-item-header">
            Communication
        </div>

        <div class="info-box-content-item-clear"></div>

        <div>
            <div class="info-box-content-item">
                <div class="info-box-content-item-line">&copy; 2012 Netflix, Inc. All rights reserved.</div>
            </div>

            <div class="info-box-content-item">
                <div class="info-box-content-item-line"><a href="http://netflix.github.com/">Netflix Open Source</a></div>
                <div class="info-box-content-item-line"><a href="https://github.com/Netflix/">Netflix GitHub</a></div>
                <div class="info-box-content-item-line"><a href="#" onClick="showListContent(); return false;">Mailing Lists</a></div>
                <div class="info-box-content-item-line">Get in on the fun: <a href="http://www.netflix.com/jobs">Join Us!</a></div>
            </div>

            <div class="info-box-content-item">
                <div class="info-box-content-item-line"><a href="http://techblog.netflix.com">Our Tech Blog</a></div>
                <div class="info-box-content-item-line"><a href="http://twitter.com/NetflixOSS">@NetflixOSS</a></div>
                <div class="info-box-content-item-line"><a href="http://www.slideshare.net/netflix">Slideshare</a></div>
            </div>
        </div>
    </div>
</div>

<div id="balloon-container">
	<div class="balloon-frame">
		<div id="balloon-heading"></div>
	
		<div id="balloon-content">
			<div id="balloon-description"></div>
			<div class="baloon-field">
				<span class="balloon-label">Watchers: </span>
				<span id="balloon-watchers"></span>
			</div>
			<div class="baloon-field">
				<span class="balloon-label">Forks: </span>
				<span id="balloon-forks"></span>
			</div>
			<div class="baloon-field">
				<span class="balloon-label">Language: </span>
				<span id="balloon-language"></span>
			</div>
			<div class="baloon-field">
				<span class="balloon-label">Open Issues: </span>
				<span id="balloon-issues"></span>
			</div>
			<div class="baloon-field">
				<span class="balloon-label">Updated: </span>
				<span id="balloon-updated"></span>
			</div>
		</div>
	</div>
</div>

<div id="balloon-arrow-left"><img src="assets/left-arrow.png" width="47" height="56" border="0" alt=""></div>
<div id="balloon-arrow-right"><img src="assets/right-arrow.png" width="47" height="55" border="0" alt=""></div>

</body>
</html>
